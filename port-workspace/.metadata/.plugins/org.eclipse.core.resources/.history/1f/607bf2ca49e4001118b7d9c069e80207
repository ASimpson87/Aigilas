package com.spx.particles;import com.spx.wrapper.*;import java.util.*;import com.spx.core.*;import com.spx.entities.*;
    public abstract class ParticleBehavior
    {
        public virtual int GetParticleCount()
        {
            return 10;
        }
        public abstract void Update(Particle2 particle);
    }

    public class RadiateBehavior  extends  ParticleBehavior
    {
        protected static ParticleBehavior __instance;
        public static ParticleBehavior GetInstance()
        {
            if (__instance == null)
            {
                __instance = new RadiateBehavior();
            }
            return __instance;
        }

        public override void Update(Particle2 particle)
        {            
            particle.Position.SetX(particle.Position.X + (float)Math.cos(particle.Angle) * particle.MoveSpeed);
            particle.Position.SetY(particle.Position.Y + (float)Math.sin(particle.Angle) * particle.MoveSpeed);
        }
    }

    public class FollowBehavior  extends  ParticleBehavior
    {
        protected static ParticleBehavior __instance;
        public static ParticleBehavior GetInstance()
        {
            if (__instance == null)
            {
                __instance = new FollowBehavior();
            }
            return __instance;
        }

        public override void Update(Particle2 particle)
        {
            if (particle.Entity != null)
            {

                var size = RNG.Rand.Next(0,10);
                particle.SetSize(size, size);
                if (particle.Radius < 5)
                {
                    particle.Radius = 5;
                    particle.Toggle = true;
                }
                else if (particle.Radius > 16)
                {
                    particle.Radius = 16;
                    particle.Toggle = false;
                }
                if (particle.Toggle)
                {
                    particle.Radius += particle.MoveSpeed/10;
                    particle.Angle += Math.pI / 300;
                }
                else
                {
                    particle.Radius -= particle.MoveSpeed/10;
                    particle.Angle -= Math.pI / 150;
                }

                particle.Position.SetX(particle.Entity.GetLocation().PosCenterX - particle.Width / 2 + (float)Math.cos(particle.Angle) * particle.Radius);
                particle.Position.SetY(particle.Entity.GetLocation().PosCenterY - particle.Height / 2 + (float)Math.sin(particle.Angle) * particle.Radius);
            }
        }
    }

    public class RotateBehavior  extends  ParticleBehavior
    {
        protected static ParticleBehavior __instance;
        public static ParticleBehavior GetInstance()
        {
            if (__instance == null)
            {
                __instance = new RotateBehavior();
            }
            return __instance;
        }

        public override int GetParticleCount()
        {
            return 1;
        }

        public override void Update(Particle2 particle)
        {
            if (particle.Entity != null)
            {
                particle.Radius = 18;
                particle.SetSize(15, 15);
                particle.Angle += Math.pI / 30;
                particle.Position.SetX(particle.Entity.GetLocation().PosCenterX - particle.Width/2 + (float)Math.cos(particle.Angle) * particle.Radius);
                particle.Position.SetY(particle.Entity.GetLocation().PosCenterY -particle.Height/2 + (float)Math.sin(particle.Angle) * particle.Radius);
            }
        }
    }
